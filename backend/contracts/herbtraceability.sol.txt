pragma solidity ^0.8.19;

contract HerbTrace {
    struct CollectionEvent {
        uint256 id;
        string herbName;
        string location;
        string collector;
        uint256 timestamp;
    }

    uint256 public nextId = 1;
    mapping(uint256 => CollectionEvent) public eventsList;

    event HerbCollected(
        uint256 id,
        string herbName,
        string location,
        string collector,
        uint256 timestamp
    );

    function addCollection(
        string memory _herbName,
        string memory _location,
        string memory _collector
    ) public returns (uint256) {
        uint256 id = nextId++;

        eventsList[id] = CollectionEvent(
            id,
            _herbName,
            _location,
            _collector,
            block.timestamp
        );

        emit HerbCollected(
            id,
            _herbName,
            _location,
            _collector,
            block.timestamp
        );

        return id;
    }

    function getCollection(
        uint256 _id
    ) public view returns (
        uint256,
        string memory,
        string memory,
        string memory,
        uint256
    ) {
        CollectionEvent memory ev = eventsList[_id];
        return (ev.id, ev.herbName, ev.location, ev.collector, ev.timestamp);
    }
}